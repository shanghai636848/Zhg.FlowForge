@using static Zhg.FlowForge.App.Shared.Layout.LanguageSwitcher
@inject NavigationManager Navigation

<!-- 现代化顶部导航栏 -->
<header class="sticky top-0 z-50 border-b border-slate-200/60 bg-white/80 shadow-sm backdrop-blur-md">
    <nav class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
        <div class="flex h-14 items-center justify-between">
            <!-- Logo 区域 -->
            <div class="flex cursor-pointer items-center gap-2 transition-transform hover:scale-105" @onclick="NavigateHome">
                <div class="flex h-8 w-8 items-center justify-center rounded-lg bg-gradient-to-br from-blue-500 via-indigo-500 to-purple-600 shadow-md transition-all hover:shadow-lg">
                    <svg class="h-5 w-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                    </svg>
                </div>
                <span class="bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 bg-clip-text text-sm font-bold text-transparent">
                    FlowForge
                </span>
            </div>

            <!-- 桌面端导航 -->
            <div class="hidden items-center gap-1 md:flex">
                <NavLink href="/" class="nav-link group">
                    <span class="flex items-center gap-2">
                        <svg class="h-4 w-4 transition-transform group-hover:scale-110" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
                        </svg>
                        <span>@CurrentLanguage.Home</span>
                    </span>
                </NavLink>
                <NavLink href="/features" class="nav-link group">
                    <span class="flex items-center gap-2">
                        <svg class="h-4 w-4 transition-transform group-hover:scale-110" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z" />
                        </svg>
                        <span>@CurrentLanguage.Features</span>
                    </span>
                </NavLink>
                <NavLink href="/about" class="nav-link group">
                    <span class="flex items-center gap-2">
                        <svg class="h-4 w-4 transition-transform group-hover:scale-110" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        <span>@CurrentLanguage.About</span>
                    </span>
                </NavLink>
                <NavLink href="/contact" class="nav-link group">
                    <span class="flex items-center gap-2">
                        <svg class="h-4 w-4 transition-transform group-hover:scale-110" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                        </svg>
                        <span>@CurrentLanguage.Contact</span>
                    </span>
                </NavLink>
            </div>

            <!-- 右侧操作区 -->
            <div class="flex items-center gap-2">
                <LanguageSwitcher @bind-CurrentLanguage="CurrentLanguage" />

                <!-- 用户登录按钮 (桌面) -->
                <button class="hidden items-center gap-2 rounded-lg bg-gradient-to-r from-blue-500 via-indigo-500 to-purple-600 px-3 py-1.5 text-xs font-medium text-white shadow-md transition-all hover:scale-105 hover:shadow-lg active:scale-95 md:flex">
                    <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                    </svg>
                    <span>@CurrentLanguage.Login</span>
                </button>

                <!-- 汉堡包菜单按钮 (移动端) -->
                <button @onclick="ToggleMobileMenu"
                        class="group flex h-9 w-9 items-center justify-center rounded-lg border border-slate-200 bg-white transition-all hover:border-slate-300 hover:bg-slate-50 hover:shadow-md active:scale-95 md:hidden">
                    <div class="relative h-5 w-5">
                        <span class="absolute left-0 top-1 h-0.5 w-5 rounded-full bg-slate-600 transition-all duration-300 @(mobileMenuOpen ? "top-2 rotate-45" : "")"></span>
                        <span class="absolute left-0 top-2 h-0.5 rounded-full bg-slate-600 transition-all duration-300 @(mobileMenuOpen ? "w-0 opacity-0" : "w-5")"></span>
                        <span class="absolute left-0 top-3 h-0.5 w-5 rounded-full bg-slate-600 transition-all duration-300 @(mobileMenuOpen ? "top-2 -rotate-45" : "")"></span>
                    </div>
                </button>
            </div>
        </div>

        <!-- 移动端菜单 -->
        <div class="@GetMobileMenuClass()">
            <div class="flex flex-col gap-2 py-4">
                <NavLink href="/" class="mobile-nav-link group" @onclick="CloseMobileMenu">
                    <svg class="h-4 w-4 transition-transform group-hover:scale-110" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
                    </svg>
                    @CurrentLanguage.Home
                </NavLink>
                <NavLink href="/features" class="mobile-nav-link group" @onclick="CloseMobileMenu">
                    <svg class="h-4 w-4 transition-transform group-hover:scale-110" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z" />
                    </svg>
                    @CurrentLanguage.Features
                </NavLink>
                <NavLink href="/about" class="mobile-nav-link group" @onclick="CloseMobileMenu">
                    <svg class="h-4 w-4 transition-transform group-hover:scale-110" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    @CurrentLanguage.About
                </NavLink>
                <NavLink href="/contact" class="mobile-nav-link group" @onclick="CloseMobileMenu">
                    <svg class="h-4 w-4 transition-transform group-hover:scale-110" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                    </svg>
                    @CurrentLanguage.Contact
                </NavLink>

                <div class="mt-2 h-px bg-gradient-to-r from-transparent via-slate-200 to-transparent"></div>

                <button class="flex w-full items-center justify-center gap-2 rounded-lg bg-gradient-to-r from-blue-500 via-indigo-500 to-purple-600 px-4 py-2 text-sm font-medium text-white shadow-md transition-all hover:shadow-lg active:scale-95">
                    <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                    </svg>
                    @CurrentLanguage.Login
                </button>
            </div>
        </div>
    </nav>
</header>

<style>
    .nav-link {
        padding: 0.5rem 0.75rem;
        border-radius: 0.5rem;
        color: #475569;
        font-weight: 500;
        font-size: 0.8125rem;
        transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
    }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: 0.25rem;
            left: 50%;
            transform: translateX(-50%) scaleX(0);
            width: 60%;
            height: 2px;
            background: linear-gradient(to right, #3b82f6, #6366f1, #8b5cf6);
            border-radius: 2px;
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .nav-link:hover {
            background: linear-gradient(135deg, #eff6ff 0%, #eef2ff 100%);
            color: #4f46e5;
            transform: translateY(-1px);
        }

            .nav-link:hover::after {
                transform: translateX(-50%) scaleX(1);
            }

        .nav-link.active {
            color: #4f46e5;
            background: linear-gradient(135deg, #eff6ff 0%, #eef2ff 100%);
            box-shadow: 0 1px 3px rgba(99, 102, 241, 0.1);
        }

            .nav-link.active::after {
                transform: translateX(-50%) scaleX(1);
            }

    .mobile-nav-link {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding: 0.625rem 1rem;
        border-radius: 0.5rem;
        color: #475569;
        font-weight: 500;
        font-size: 0.875rem;
        transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        border: 1px solid transparent;
    }

        .mobile-nav-link:hover, .mobile-nav-link.active {
            background: linear-gradient(135deg, #eff6ff 0%, #eef2ff 100%);
            color: #4f46e5;
            border-color: #c7d2fe;
            transform: translateX(4px);
            box-shadow: 0 2px 8px rgba(99, 102, 241, 0.1);
        }
</style>

@code {
    private bool mobileMenuOpen = false;

    [Parameter]
    public LanguageData CurrentLanguage { get; set; } = LanguageData.English;

    private void ToggleMobileMenu()
    {
        mobileMenuOpen = !mobileMenuOpen;
    }

    private void CloseMobileMenu()
    {
        mobileMenuOpen = false;
    }

    private void NavigateHome()
    {
        Navigation.NavigateTo("/");
        mobileMenuOpen = false;
    }

    private string GetMobileMenuClass()
    {
        return mobileMenuOpen
            ? "block md:hidden animate-slide-down"
            : "hidden";
    }
}

<style>
    @@keyframes slide-down {
        from {
            opacity: 0;
            transform: translateY(-10px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .animate-slide-down {
        animation: slide-down 0.3s ease-out;
    }
</style>