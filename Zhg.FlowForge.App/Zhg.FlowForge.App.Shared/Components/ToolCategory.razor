<!-- ToolCategory.razor.cs -->
<div class="tool-category">
    <div class="flex cursor-pointer items-center justify-between rounded px-2 py-1.5 transition-all hover:bg-slate-100/80"
         @onclick="ToggleCategory">
        <span class="flex items-center gap-1 text-xs font-semibold text-slate-700">
            <i class="fas @Icon text-[10px] text-blue-500"></i>
            @Title
        </span>
        <span class="text-[10px] text-slate-400 transition-transform duration-200 @(IsCollapsed ? "-rotate-90" : "")">
            <i class="fas fa-chevron-down"></i>
        </span>
    </div>

    <div class="@GetCategoryItemsClass()">
        @ChildContent
    </div>
</div>

@code {
    [Parameter] public string Title { get; set; } = "";
    [Parameter] public string Icon { get; set; } = "";
    [Parameter] public RenderFragment? ChildContent { get; set; }

    private bool IsCollapsed { get; set; } = false;

    private void ToggleCategory()
    {
        IsCollapsed = !IsCollapsed;
    }

    private string GetCategoryItemsClass()
    {
        return IsCollapsed
            ? "grid grid-cols-3 gap-1 px-2 py-0 max-h-0 overflow-hidden transition-all duration-300 ease-in-out"
            : "grid grid-cols-3 gap-1 px-2 py-1.5 max-h-96 overflow-hidden transition-all duration-300 ease-in-out";
    }
}