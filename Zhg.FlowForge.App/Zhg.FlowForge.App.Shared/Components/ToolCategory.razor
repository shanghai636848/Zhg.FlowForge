<!-- ============================================ -->
<!-- ToolCategory.razor - 工具分类组件 -->
<!-- ============================================ -->
@* @page "/components/tool-category" *@

<div class="tool-category">
    <div class="group flex cursor-pointer items-center justify-between rounded-lg px-2.5 py-1.5 transition-all hover:bg-gradient-to-r @GetHoverGradient()"
         @onclick="ToggleCategory">
        <span class="flex items-center gap-1.5 text-xs font-bold text-transparent bg-clip-text @GetTextGradient()">
            <i class="fas @Icon text-[10px] @GetIconColor()"></i>
            @Title
        </span>
        <span class="text-[10px] @GetIconColor() transition-all duration-300 @(IsCollapsed ? "-rotate-90" : "rotate-0") group-hover:rotate-180">
            <i class="fas fa-chevron-down"></i>
        </span>
    </div>

    <div class="@GetCategoryItemsClass()">
        @ChildContent
    </div>
</div>

@code {
    [Parameter] public string Title { get; set; } = "";
    [Parameter] public string Icon { get; set; } = "";
    [Parameter] public string Color { get; set; } = "blue";
    [Parameter] public RenderFragment? ChildContent { get; set; }

    private bool IsCollapsed { get; set; } = false;

    private void ToggleCategory()
    {
        IsCollapsed = !IsCollapsed;
    }

    private string GetCategoryItemsClass()
    {
        return IsCollapsed
            ? "grid grid-cols-3 gap-1.5 px-2 py-0 max-h-0 overflow-hidden transition-all duration-300 ease-in-out"
            : "grid grid-cols-3 gap-1.5 px-2 py-2 max-h-96 overflow-hidden transition-all duration-300 ease-in-out";
    }

    private string GetTextGradient()
    {
        return Color switch
        {
            "emerald" => "bg-gradient-to-r from-emerald-600 to-teal-600",
            "sky" => "bg-gradient-to-r from-sky-600 to-blue-600",
            "cyan" => "bg-gradient-to-r from-cyan-600 to-teal-600",
            _ => "bg-gradient-to-r from-blue-600 to-indigo-600"
        };
    }

    private string GetIconColor()
    {
        return Color switch
        {
            "emerald" => "text-emerald-500",
            "sky" => "text-sky-500",
            "cyan" => "text-cyan-500",
            _ => "text-blue-500"
        };
    }

    private string GetHoverGradient()
    {
        return Color switch
        {
            "emerald" => "hover:from-emerald-50 hover:to-teal-50",
            "sky" => "hover:from-sky-50 hover:to-blue-50",
            "cyan" => "hover:from-cyan-50 hover:to-teal-50",
            _ => "hover:from-blue-50 hover:to-indigo-50"
        };
    }
}