<!-- PropertySection.razor.cs -->
<div class="overflow-hidden rounded border border-slate-200 bg-white shadow-sm">
    <div class="flex cursor-pointer select-none items-center justify-between border-b border-slate-200 bg-gradient-to-r from-slate-50 to-blue-50/30 px-2 py-1.5 transition-colors hover:from-slate-100 hover:to-blue-50/50"
         @onclick="ToggleSection">
        <span class="flex items-center gap-1 text-xs font-semibold text-slate-700">
            <i class="fas @Icon text-[10px] text-blue-500"></i>
            @Title
        </span>
        <span class="text-[10px] text-slate-400 transition-transform duration-200 @(IsCollapsed ? "-rotate-90" : "")">
            <i class="fas fa-chevron-down"></i>
        </span>
    </div>

    <div class="@GetSectionContentClass()">
        @ChildContent
    </div>
</div>

@code {
    [Parameter] public string Title { get; set; } = "";
    [Parameter] public string Icon { get; set; } = "";
    [Parameter] public bool IsVisible { get; set; } = true;
    [Parameter] public RenderFragment? ChildContent { get; set; }

    private bool IsCollapsed { get; set; } = false;

    protected override void OnParametersSet()
    {
        if (!IsVisible)
        {
            IsCollapsed = true;
        }
    }

    private void ToggleSection()
    {
        IsCollapsed = !IsCollapsed;
    }

    private string GetSectionContentClass()
    {
        return IsCollapsed
            ? "max-h-0 overflow-hidden transition-all duration-300 ease-in-out px-2 py-0"
            : "max-h-[2000px] overflow-hidden transition-all duration-300 ease-in-out px-2 py-2";
    }
}