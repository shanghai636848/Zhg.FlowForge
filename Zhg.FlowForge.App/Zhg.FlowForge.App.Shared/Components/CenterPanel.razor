
<div class="relative flex min-w-0 flex-1 flex-col bg-white">
    <!-- 画布工具栏 -->
    <div class="flex h-14 items-center border-b border-gray-200 bg-white px-4 py-3">
        <button class="inline-flex cursor-pointer items-center rounded border-none bg-blue-500 px-4 py-2 text-sm font-medium text-white transition-all duration-200 hover:-translate-y-px hover:bg-blue-600 hover:shadow active:translate-y-0"
                @onclick="OnSaveBpmn">
            <i class="fas fa-save mr-2"></i> 保存
        </button>

        <button class="ml-2 inline-flex cursor-pointer items-center rounded border border-none border-gray-200 bg-white px-4 py-2 text-sm font-medium text-gray-700 transition-all duration-200 hover:-translate-y-px hover:border-gray-300 hover:bg-gray-50 hover:shadow active:translate-y-0"
                @onclick="OnLoadBpmn">
            <i class="fas fa-folder-open mr-2"></i> 加载
        </button>

        <button class="ml-2 inline-flex cursor-pointer items-center rounded border border-none border-gray-200 bg-white px-4 py-2 text-sm font-medium text-gray-700 transition-all duration-200 hover:-translate-y-px hover:border-gray-300 hover:bg-gray-50 hover:shadow active:translate-y-0"
                @onclick="OnExportBpmn">
            <i class="fas fa-download mr-2"></i> 导出
        </button>

        <button class="ml-2 inline-flex cursor-pointer items-center rounded border border-none border-gray-200 bg-white px-4 py-2 text-sm font-medium text-gray-700 transition-all duration-200 hover:-translate-y-px hover:border-gray-300 hover:bg-gray-50 hover:shadow active:translate-y-0"
                @onclick="OnImportBpmn">
            <i class="fas fa-upload mr-2"></i> 导入
        </button>

        <div class="flex-grow"></div>

        <!-- 编辑操作 -->
        <button class="ml-2 inline-flex h-10 w-10 cursor-pointer items-center justify-center rounded border border-none border-gray-200 bg-white font-medium text-gray-700 transition-all duration-200 hover:-translate-y-px hover:border-gray-300 hover:bg-gray-50 hover:shadow active:translate-y-0"
                @onclick="OnUndo" title="撤销">
            <i class="fas fa-undo"></i>
        </button>

        <button class="ml-2 inline-flex h-10 w-10 cursor-pointer items-center justify-center rounded border border-none border-gray-200 bg-white font-medium text-gray-700 transition-all duration-200 hover:-translate-y-px hover:border-gray-300 hover:bg-gray-50 hover:shadow active:translate-y-0"
                @onclick="OnRedo" title="重做">
            <i class="fas fa-redo"></i>
        </button>

        <!-- 缩放控制 -->
        <button class="ml-2 inline-flex h-10 w-10 cursor-pointer items-center justify-center rounded border border-none border-gray-200 bg-white font-medium text-gray-700 transition-all duration-200 hover:-translate-y-px hover:border-gray-300 hover:bg-gray-50 hover:shadow active:translate-y-0"
                @onclick="OnZoomIn" title="放大">
            <i class="fas fa-plus"></i>
        </button>

        <button class="ml-2 inline-flex h-10 w-10 cursor-pointer items-center justify-center rounded border border-none border-gray-200 bg-white font-medium text-gray-700 transition-all duration-200 hover:-translate-y-px hover:border-gray-300 hover:bg-gray-50 hover:shadow active:translate-y-0"
                @onclick="OnZoomOut" title="缩小">
            <i class="fas fa-minus"></i>
        </button>

        <button class="ml-2 inline-flex h-10 w-10 cursor-pointer items-center justify-center rounded border border-none border-gray-200 bg-white font-medium text-gray-700 transition-all duration-200 hover:-translate-y-px hover:border-gray-300 hover:bg-gray-50 hover:shadow active:translate-y-0"
                @onclick="OnFitViewport" title="适应窗口">
            <i class="fas fa-expand-arrows-alt"></i>
        </button>

        <button class="ml-2 inline-flex h-10 w-10 cursor-pointer items-center justify-center rounded border border-none border-gray-200 bg-white font-medium text-gray-700 transition-all duration-200 hover:-translate-y-px hover:border-gray-300 hover:bg-gray-50 hover:shadow active:translate-y-0"
                @onclick="OnResetZoom" title="重置缩放">
            <i class="fas fa-search"></i>
        </button>
    </div>

    <!-- 画布 -->
    <div id="canvas" class="relative flex-1 bg-white"></div>

    <!-- 缩放控制浮动面板 -->
    <div class="absolute right-4 bottom-4 flex flex-col rounded border border-gray-200 bg-white shadow">
        <button class="flex h-8 w-8 cursor-pointer items-center justify-center rounded border-none bg-transparent font-bold text-gray-700 hover:bg-gray-50"
                @onclick="OnZoomIn">
            <i class="fas fa-plus"></i>
        </button>
        <div class="border-t border-b border-gray-200 px-2 py-1 text-center text-xs text-gray-500">
            @((CurrentZoom * 100).ToString("0"))%
        </div>
        <button class="flex h-8 w-8 cursor-pointer items-center justify-center rounded border-none bg-transparent font-bold text-gray-700 hover:bg-gray-50"
                @onclick="OnZoomOut">
            <i class="fas fa-minus"></i>
        </button>
    </div>
</div>

@code {
    [Parameter] public double CurrentZoom { get; set; } = 1.0;
    [Parameter] public EventCallback OnSaveBpmn { get; set; }
    [Parameter] public EventCallback OnLoadBpmn { get; set; }
    [Parameter] public EventCallback OnExportBpmn { get; set; }
    [Parameter] public EventCallback OnImportBpmn { get; set; }
    [Parameter] public EventCallback OnUndo { get; set; }
    [Parameter] public EventCallback OnRedo { get; set; }
    [Parameter] public EventCallback OnZoomIn { get; set; }
    [Parameter] public EventCallback OnZoomOut { get; set; }
    [Parameter] public EventCallback OnFitViewport { get; set; }
    [Parameter] public EventCallback OnResetZoom { get; set; }
}