<!-- CenterPanel.razor.cs -->
<div class="relative flex min-w-0 flex-1 flex-col bg-white/95 backdrop-blur-sm">
    <div class="flex h-10 items-center gap-1 border-b border-slate-200/80 bg-gradient-to-r from-white via-slate-50/50 to-white px-2 py-1.5 shadow-sm">
        <button class="inline-flex items-center gap-1 rounded bg-gradient-to-r from-blue-600 to-blue-700 px-2 py-1 text-xs font-medium text-white shadow-sm transition-all hover:from-blue-700 hover:to-blue-800 hover:shadow active:scale-95"
                @onclick="OnSaveBpmn">
            <i class="fas fa-save text-xs"></i>
            <span>保存</span>
        </button>

        <button class="inline-flex items-center gap-1 rounded border border-slate-200 bg-white px-2 py-1 text-xs font-medium text-slate-700 shadow-sm transition-all hover:border-slate-300 hover:bg-slate-50 hover:shadow active:scale-95"
                @onclick="OnLoadBpmn">
            <i class="fas fa-folder-open text-xs"></i>
            <span>加载</span>
        </button>

        <button class="inline-flex items-center gap-1 rounded border border-slate-200 bg-white px-2 py-1 text-xs font-medium text-slate-700 shadow-sm transition-all hover:border-slate-300 hover:bg-slate-50 hover:shadow active:scale-95"
                @onclick="OnExportBpmn">
            <i class="fas fa-download text-xs"></i>
            <span>导出</span>
        </button>

        <button class="inline-flex items-center gap-1 rounded border border-slate-200 bg-white px-2 py-1 text-xs font-medium text-slate-700 shadow-sm transition-all hover:border-slate-300 hover:bg-slate-50 hover:shadow active:scale-95"
                @onclick="OnImportBpmn">
            <i class="fas fa-upload text-xs"></i>
            <span>导入</span>
        </button>

        <div class="mx-1 h-5 w-px bg-slate-200"></div>

        <button class="flex h-7 w-7 items-center justify-center rounded border border-slate-200 bg-white text-slate-600 shadow-sm transition-all hover:border-slate-300 hover:bg-slate-50 hover:text-slate-900 hover:shadow active:scale-95"
                @onclick="OnUndo" title="撤销">
            <i class="fas fa-undo text-xs"></i>
        </button>

        <button class="flex h-7 w-7 items-center justify-center rounded border border-slate-200 bg-white text-slate-600 shadow-sm transition-all hover:border-slate-300 hover:bg-slate-50 hover:text-slate-900 hover:shadow active:scale-95"
                @onclick="OnRedo" title="重做">
            <i class="fas fa-redo text-xs"></i>
        </button>

        <div class="flex-grow"></div>

        <button class="flex h-7 w-7 items-center justify-center rounded border border-slate-200 bg-white text-slate-600 shadow-sm transition-all hover:border-slate-300 hover:bg-slate-50 hover:text-slate-900 hover:shadow active:scale-95"
                @onclick="OnZoomIn" title="放大">
            <i class="fas fa-search-plus text-xs"></i>
        </button>

        <button class="flex h-7 w-7 items-center justify-center rounded border border-slate-200 bg-white text-slate-600 shadow-sm transition-all hover:border-slate-300 hover:bg-slate-50 hover:text-slate-900 hover:shadow active:scale-95"
                @onclick="OnZoomOut" title="缩小">
            <i class="fas fa-search-minus text-xs"></i>
        </button>

        <button class="flex h-7 w-7 items-center justify-center rounded border border-slate-200 bg-white text-slate-600 shadow-sm transition-all hover:border-slate-300 hover:bg-slate-50 hover:text-slate-900 hover:shadow active:scale-95"
                @onclick="OnFitViewport" title="适应画布">
            <i class="fas fa-compress-arrows-alt text-xs"></i>
        </button>

        <button class="flex h-7 w-7 items-center justify-center rounded border border-slate-200 bg-white text-slate-600 shadow-sm transition-all hover:border-slate-300 hover:bg-slate-50 hover:text-slate-900 hover:shadow active:scale-95"
                @onclick="OnResetZoom" title="重置缩放">
            <i class="fas fa-expand text-xs"></i>
        </button>
    </div>

    <div id="canvas" class="relative flex-1 bg-gradient-to-br from-slate-50 via-white to-blue-50/30"></div>

    <div class="absolute bottom-3 right-3 flex flex-col overflow-hidden rounded border border-slate-200 bg-white/95 shadow-lg backdrop-blur-sm">
        <button class="flex h-6 w-6 items-center justify-center border-b border-slate-200 text-slate-600 transition-colors hover:bg-slate-50 hover:text-blue-600"
                @onclick="OnZoomIn">
            <i class="fas fa-plus text-xs"></i>
        </button>
        <div class="flex h-7 w-6 items-center justify-center border-b border-slate-200 bg-slate-50/50 text-[10px] font-medium text-slate-600">
            @((CurrentZoom * 100).ToString("0"))%
        </div>
        <button class="flex h-6 w-6 items-center justify-center text-slate-600 transition-colors hover:bg-slate-50 hover:text-blue-600"
                @onclick="OnZoomOut">
            <i class="fas fa-minus text-xs"></i>
        </button>
    </div>
</div>

@code {
    [Parameter] public double CurrentZoom { get; set; } = 1.0;
    [Parameter] public EventCallback OnSaveBpmn { get; set; }
    [Parameter] public EventCallback OnLoadBpmn { get; set; }
    [Parameter] public EventCallback OnExportBpmn { get; set; }
    [Parameter] public EventCallback OnImportBpmn { get; set; }
    [Parameter] public EventCallback OnUndo { get; set; }
    [Parameter] public EventCallback OnRedo { get; set; }
    [Parameter] public EventCallback OnZoomIn { get; set; }
    [Parameter] public EventCallback OnZoomOut { get; set; }
    [Parameter] public EventCallback OnFitViewport { get; set; }
    [Parameter] public EventCallback OnResetZoom { get; set; }
}