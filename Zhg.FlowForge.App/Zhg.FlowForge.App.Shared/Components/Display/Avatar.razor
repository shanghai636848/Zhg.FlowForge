<div class="@GetAvatarClass()">
	@if (!string.IsNullOrEmpty(Src))
	{
		<img src="@Src" alt="@Alt" class="h-full w-full object-cover" />
	}
	else if (!string.IsNullOrEmpty(Name))
	{
		<span class="@GetInitialsClass()">
			@GetInitials(Name)
		</span>
	}
	else
	{
		<i class="fas fa-user @GetIconSizeClass()"></i>
	}
	@if (ShowStatus)
	{
		<span class="@GetStatusClass()"></span>
	}
</div>
@code {
	[Parameter] public string Src { get; set; } = "";
	[Parameter] public string Alt { get; set; } = "";
	[Parameter] public string Name { get; set; } = "";
	[Parameter] public string Size { get; set; } = "md"; // xs, sm, md, lg, xl
	[Parameter] public string Shape { get; set; } = "circle"; // circle, square, rounded
	[Parameter] public bool ShowStatus { get; set; }
	[Parameter] public string Status { get; set; } = "online"; // online, offline, busy, away
	private string GetAvatarClass()
	{
		var baseClass = "relative inline-flex items-center justify-center overflow-hidden shrink-0";    // 尺寸
		var sizeClass = Size switch
		{
			"xs" => "w-6 h-6",
			"sm" => "w-7 h-7",
			"lg" => "w-10 h-10",
			"xl" => "w-12 h-12",
			_ => "w-8 h-8"
		};    // 形状
		var shapeClass = Shape switch
		{
			"square" => "",
			"rounded" => "rounded-md",
			_ => "rounded-full"
		};    // 背景
		var bgClass = string.IsNullOrEmpty(Src) ? "bg-blue-100 text-blue-600" : ""; return $"{baseClass} {sizeClass} {shapeClass} {bgClass}";
	}
	private string GetInitialsClass()
	{
		return Size switch
		{
			"xs" => "text-xs",
			"sm" => "text-xs",
			"lg" => "text-sm",
			"xl" => "text-base",
			_ => "text-xs"
		};
	}
	private string GetIconSizeClass()
	{
		return Size switch
		{
			"xs" => "text-xs",
			"sm" => "text-xs",
			"lg" => "text-base",
			"xl" => "text-lg",
			_ => "text-sm"
		};
	}
	private string GetStatusClass()
	{
		var baseClass = "absolute rounded-full border-2 border-white"; var positionClass = Size switch
		{
			"xs" => "w-1.5 h-1.5 bottom-0 right-0",
			"sm" => "w-2 h-2 bottom-0 right-0",
			"lg" => "w-2.5 h-2.5 bottom-0.5 right-0.5",
			"xl" => "w-3 h-3 bottom-0.5 right-0.5",
			_ => "w-2 h-2 bottom-0 right-0"
		}; var colorClass = Status switch
		{
			"online" => "bg-emerald-500",
			"busy" => "bg-rose-500",
			"away" => "bg-amber-500",
			_ => "bg-slate-400"
		}; return $"{baseClass} {positionClass} {colorClass}";
	}
	private string GetInitials(string name)
	{
		var parts = name.Split(' ', StringSplitOptions.RemoveEmptyEntries);
		if (parts.Length == 0) return "";
		if (parts.Length == 1) return parts[0].Substring(0, Math.Min(2, parts[0].Length)).ToUpper();
		return $"{parts[0][0]}{parts[^1][0]}".ToUpper();
	}
}