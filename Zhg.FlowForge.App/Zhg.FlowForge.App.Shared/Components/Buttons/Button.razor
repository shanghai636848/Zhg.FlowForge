<button class="@GetButtonClass()"
		disabled="@IsDisabled"
		title="@Title"
		@onclick="OnClickHandler">

	@if (Loading)
	{
		<i class="fas fa-spinner fa-spin text-xs"></i>
	}
	else if (!string.IsNullOrEmpty(Icon))
	{
		<i class="@Icon text-xs"></i>
	}

	@if (ChildContent != null)
	{
		<span>@ChildContent</span>
	}
</button>

@code {
    [Parameter] public string Title { get; set; } = "";
	[Parameter] public string Icon { get; set; } = "";
	[Parameter] public string Variant { get; set; } = "primary"; // primary, secondary, success, danger, ghost
	[Parameter] public string Size { get; set; } = "md"; // xs, sm, md, lg
	[Parameter] public bool Loading { get; set; }
	[Parameter] public bool Disabled { get; set; }
	[Parameter] public bool FullWidth { get; set; }
	[Parameter] public RenderFragment? ChildContent { get; set; }
	[Parameter] public EventCallback OnClick { get; set; }

	private bool IsDisabled => Disabled || Loading;

	private async Task OnClickHandler()
	{
		if (!Disabled && !Loading)
		{
			await OnClick.InvokeAsync();
		}
	}

	private string GetButtonClass()
	{
		var baseClass = "inline-flex items-center justify-center gap-1.5 rounded-md font-medium transition-all";

		// 尺寸
		var sizeClass = Size switch
		{
			"xs" => "h-6 px-2 text-xs",
			"sm" => "h-7 px-2.5 text-xs",
			"lg" => "h-9 px-4 text-sm",
			_ => "h-8 px-3 text-xs"
		};

		// 变体
		var variantClass = Variant switch
		{
			"primary" => "theme-btn-gradient text-white shadow-sm hover:shadow-md",
			"secondary" => "border border-blue-200 bg-gradient-to-r from-blue-50 to-blue-100 text-blue-700 hover:border-blue-300",
			"success" => "bg-gradient-to-r from-emerald-500 to-teal-600 text-white shadow-sm hover:shadow-md",
			"danger" => "bg-gradient-to-r from-rose-500 to-pink-600 text-white shadow-sm hover:shadow-md",
			"ghost" => "hover:bg-slate-100 text-slate-700",
			_ => "theme-btn-gradient text-white shadow-sm hover:shadow-md"
		};

		// 状态
		var stateClass = "";
		if (Disabled || Loading)
			stateClass = "opacity-50 cursor-not-allowed";
		else if (Variant != "ghost")
			stateClass = "hover:scale-105 active:scale-95";

		// 宽度
		var widthClass = FullWidth ? "w-full" : "";

		return $"{baseClass} {sizeClass} {variantClass} {stateClass} {widthClass}";
	}
}