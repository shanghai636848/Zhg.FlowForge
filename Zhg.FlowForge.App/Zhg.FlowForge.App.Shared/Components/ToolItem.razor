<!-- ToolItem.razor.cs -->
<div class="group flex h-11 w-full cursor-grab flex-col items-center justify-center rounded border border-slate-200 bg-gradient-to-br from-white to-slate-50/50 shadow-sm transition-all hover:scale-105 hover:border-blue-300 hover:bg-white hover:shadow-md active:cursor-grabbing active:scale-95"
     @onmousedown="OnMouseDown">
    <div class="flex items-center justify-center text-sm text-blue-500 transition-colors group-hover:text-blue-600">
        <i class="fas @Icon"></i>
    </div>
    <div class="mt-0.5 text-[10px] font-medium leading-tight text-slate-600 transition-colors group-hover:text-slate-900">
        @Label
    </div>
</div>

@code {
    [Parameter] public string Type { get; set; } = "";
    [Parameter] public string Icon { get; set; } = "";
    [Parameter] public string Label { get; set; } = "";

    [Inject] private IJSRuntime JSRuntime { get; set; } = default!;

    private async Task OnMouseDown(MouseEventArgs e)
    {
        try
        {
            await JSRuntime.InvokeVoidAsync("createBpmnElement", Type, new
            {
                clientX = e.ClientX,
                clientY = e.ClientY,
                pageX = e.PageX,
                pageY = e.PageY
            });
        }
        catch (JSException ex)
        {
            Console.WriteLine($"Error creating BPMN element: {ex.Message}");
        }
    }
}